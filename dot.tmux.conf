#
# https://medium.freecodecamp.org/tmux-in-practice-series-of-posts-ae34f16cfab0
#


# remap prefix to Control + a
set -g prefix C-a
unbind C-b
bind C-a send-prefix


# Remap window navigation to vim
setw -g mode-keys vi
unbind-key j
bind-key j select-pane -D
unbind-key k
bind-key k select-pane -U
unbind-key h
bind-key h select-pane -L
unbind-key l
bind-key l select-pane -R


# Force a reload of the config file
unbind r
bind r source-file ~/.tmux.conf


# http://www.rushiagr.com/blog/2016/06/16/everything-you-need-to-know-about-tmux-copy-pasting-ubuntu/
# Everything you need to know about Tmux copy paste - Ubuntu
#
# You can always copy stuff into clipboard while usin Tmux. “Why do I need a
# Tmux buffer then”, you might wonder. This is because, in your shell, the text
# you want to select might not fit in your current screen (e.g. output of cat
# /etc/passwd file). If you copy normally, you will only be able to copy text
# visible on your screen, and not the output which is ‘scrolled up’ due to a lot
# of output.

# Tmux Vim-bindings for copying into tmux buffer
#
# Note that for a newer tmux version (2.4 and above I think, not sure), the last
# three lines should be replaced with:
# 
# bind-key -T copy-mode-vi v send-keys -X begin-selection
# bind-key -T copy-mode-vi y send-keys -X copy-selection
# bind-key -T copy-mode-vi r send-keys -X rectangle-toggle
# 
# scenario:
#
# Now you can enter copy mode by pressing CTRL+b,[, and then go to start point,
# press ‘v’ and start copying. After you have selected text you want to copy,
# you can just press ‘y’ (or the default ‘enter’ key) to copy the text into
# Tmux’s buffer. This is exactly the commands you would use in Vim to copy text.
# To paste, press CTRL+b, P.
# 
# note that is for within tmx

unbind [
bind Escape copy-mode
unbind p
bind p paste-buffer
bind-key -t vi-copy 'v' begin-selection
bind-key -t vi-copy 'y' copy-selection


# Copy from tmux buffer to system buffer (clipboard)
#
# For this to happen, you need to install xclip on your computer. Do it as:
# sudo apt-get install --assume-yes xclip
#
#       xclip - command line interface to X selections (clipboard)
#
#       -selection
#              specify which X selection to use, options are "primary"  to  use
#              XA_PRIMARY  (default),  "secondary"  for  XA_SECONDARY or "clip‐
#              board" for XA_CLIPBOARD
#
#       -i, -in
#              read  text  into  X  selection  from  standard  input  or  files
#              (default)
#
#       -f, -filter
#              when  xclip  is  invoked in the in mode with output level set to
#              silent (the defaults), the filter option  will  cause  xclip  to
#              print the text piped to standard in back to standard out unmodi‐
#              fied

bind -t vi-copy y copy-pipe "xclip -sel clip -i"


# Tmux copy with mouse drag
# You can enable ‘mouse mode’, using which you can copy text into `tmux buffer` 
# by mouse drag.
#
# setw -g mode-mouse on
# set -g mouse-select-window on
# 
# Note that if your tmux version is 2.1 or above, you need to include the
# following line instead of the above two

set -g mouse on


# But now I can’t do normal copy-paste with mouse!
#
# You’ll notice that now all your selections will go to tmux buffer, and not
# clipboard buffer. Of course, you can enable copying to system clipboard as
# described in a section above. However, you can notice that you can’t double
# click to select a complete word with vi’s tmux copy-pasting shortcuts + mouse
# option enabled.
#
# Just press SHIFT button when copying, and now you can copy as if Tmux doesn’t
# exist! :)


# Copy from a remote server
# Install xclip on the remote Ubuntu/Linux server, and add the line mentioned
# above (bind -t vi-copy y copy-pipe "xclip -sel clip -i") to ~/.tmux.conf on
# that server. Also, pass -X option when making SSH connection to the server,
# like so:
#
# ssh -X remoteuser@remotehost
#
# And after that everything you copy into remote’s Tmux buffer will get copied
# over to local clipboard. Magic!


# Previos window since 'p' is used for paste instead.
# bind P previous-window
run-shell ~/Downloads/tmux-logging/logging.tmux

